<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Clock Widget</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>body {
        background-color: #f8f9fa;
        color: #343a40;
    }
    
    .dark-mode {
        background-color: #343a40;
        color: #4d8fd2;
        
    }
    
    .list-group-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    #map {
        height: 400px;
        background-color: #e9ecef;
    }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center">World Clock Widget</h1>
        <div class="row mb-4">
            <div class="col-md-6">
                <h4>Current Times</h4>
                <div id="clockDisplay" class="list-group"></div>
            </div>
            <div class="col-md-6">
                <h4>Time Zone Comparison</h4>
                <div class="form-group">
                    <input type="text" id="tz1" class="form-control" placeholder="Enter first timezone (e.g., 'America/New_York')">
                    <input type="text" id="tz2" class="form-control mt-2" placeholder="Enter second timezone (e.g., 'Europe/London')">
                    <button id="compareBtn" class="btn btn-primary mt-2">Compare Time Zones</button>
                </div>
                <div id="timeDifference" class="mt-3"></div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-md-12">
                <h4>Customize Cities</h4>
                <input type="text" id="cityInput" class="form-control" placeholder="Add a city (e.g., 'Tokyo')">
                <button id="addCityBtn" class="btn btn-success mt-2">Add City</button>
                <ul id="customCities" class="list-group mt-3"></ul>
            </div>
        </div>
        <button id="toggleMode" class="btn btn-secondary">Toggle Dark/Light Mode</button>
        <div id="map" class="mt-4"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment/moment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.34/moment-timezone-with-data.min.js"></script>
    <script>const cities = ['America/New_York', 'Europe/London', 'Asia/Tokyo', 'Australia/Sydney'];
        const cityDisplay = document.getElementById('clockDisplay');
        const customCities = document.getElementById('customCities');
        const toggleModeBtn = document.getElementById('toggleMode');
        let darkMode = false;
        
        // Function to display current time for each city
        function updateClocks() {
            cityDisplay.innerHTML = '';
            cities.forEach(city => {
                const time = moment.tz(city).format('HH:mm:ss');
                const cityItem = document.createElement('div');
                cityItem.className = 'list-group-item';
                cityItem.innerHTML = `${city}: <strong>${time}</strong>`;
                cityDisplay.appendChild(cityItem);
            });
        }
        
        // Function to compare time zones
        document.getElementById('compareBtn').addEventListener('click', () => {
            const tz1 = document.getElementById('tz1').value;
            const tz2 = document.getElementById('tz2').value;
        
            if (moment.tz.zone(tz1) && moment.tz.zone(tz2)) {
                const time1 = moment.tz(tz1).format('HH:mm:ss');
                const time2 = moment.tz(tz2).format('HH:mm:ss');
                const diff = moment.tz(tz1).utcOffset() - moment.tz(tz2).utcOffset();
                const differenceText = `Time difference between ${tz1} and ${tz2} is ${diff / 60} hours.`;
                document.getElementById('timeDifference').innerHTML = `${tz1}: ${time1} | ${tz2}: ${time2} <br> ${differenceText}`;
            } else {
                alert('Invalid timezone entered.');
            }
        });
        
        // Function to add a custom city
        document.getElementById('addCityBtn').addEventListener('click', () => {
            const cityInput = document.getElementById('cityInput').value;
            if (moment.tz.zone(cityInput)) {
                cities.push(cityInput);
                const cityItem = document.createElement('li');
                cityItem.className = 'list-group-item';
                cityItem.innerHTML = cityInput;
                customCities.appendChild(cityItem);
                document.getElementById('cityInput').value = '';
            } else {
                alert('Invalid timezone entered.');
            }
        });
        
        // Function to toggle dark/light mode
        toggleModeBtn.addEventListener('click', () => {
            darkMode = !darkMode;
            document.body.classList.toggle('dark-mode', darkMode);
        });
        
        // Update clocks every second
        setInterval(updateClocks, 1000);
        updateClocks();
        </script>
</body>
</html>
